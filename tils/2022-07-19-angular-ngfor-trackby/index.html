<!doctype html><html><head lang=en><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><title>Angular *ngFor trackBy - vknabel</title><link rel=icon type=image/png href=/images/vknabel.jpg><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="When iterating over an array of objects in Angular, the change detection compares the references of the objects to detect changes.
If the object reference now change too, like when updating local data from the network, Angular will discard the identity of all nested components within the ngFor and re-render the entire list. Even if the objects deeply equal, the change detection will still detect the change.
To help our loop caching components and instead changing their inputs, we can add a trackBy function to the ngFor directive."><meta property="og:image" content><meta property="og:url" content="https://vknabel.com/tils/2022-07-19-angular-ngfor-trackby/"><meta property="og:site_name" content="vknabel"><meta property="og:title" content="Angular *ngFor trackBy"><meta property="og:description" content="When iterating over an array of objects in Angular, the change detection compares the references of the objects to detect changes.
If the object reference now change too, like when updating local data from the network, Angular will discard the identity of all nested components within the ngFor and re-render the entire list. Even if the objects deeply equal, the change detection will still detect the change.
To help our loop caching components and instead changing their inputs, we can add a trackBy function to the ngFor directive."><meta property="og:locale" content="en_us"><meta property="og:type" content="article"><meta property="article:section" content="tils"><meta property="article:published_time" content="2022-07-19T00:00:00+00:00"><meta property="article:modified_time" content="2022-07-19T00:00:00+00:00"><meta property="article:tag" content="Web"><meta name=twitter:card content="summary"><meta name=twitter:title content="Angular *ngFor trackBy"><meta name=twitter:description content="When iterating over an array of objects in Angular, the change detection compares the references of the objects to detect changes.
If the object reference now change too, like when updating local data from the network, Angular will discard the identity of all nested components within the ngFor and re-render the entire list. Even if the objects deeply equal, the change detection will still detect the change.
To help our loop caching components and instead changing their inputs, we can add a trackBy function to the ngFor directive."><script src=https://vknabel.com/js/feather.min.js></script><link href=https://vknabel.com/css/fonts.2c2227b81b1970a03e760aa2e6121cd01f87c88586803cbb282aa224720a765f.css rel=stylesheet><link rel=stylesheet type=text/css media=screen href=https://vknabel.com/css/main.6a0f23ea50fd34b46fee262a5a68e17d458c51a2bc99ba1ba018065de6b180c3.css><link id=darkModeStyle rel=stylesheet type=text/css href=https://vknabel.com/css/dark.50b57e12d401420df23965fed157368aba37b76df0ecefd0b1ecd4da664f01a0.css media="(prefers-color-scheme: dark)"><link rel=stylesheet type=text/css href=/css/overrides.css></head><body><div class=content><header><div class=main><a href=https://vknabel.com/>vknabel</a></div><nav><a href=/>blog</a>
<a href=/tils>tils</a>
<a href=/about>about</a>
<a href=/tags>tags</a></nav></header><main><article><div class=post-container><div class=post-content><div class=title><h1 class=title>Angular *ngFor trackBy</h1><div class=meta>Posted on Jul 19, 2022</div></div><section class=body><p>When iterating over an array of objects in Angular, the change detection compares the references of the objects to detect changes.</p><p>If the object reference now change too, like when updating local data from the network, Angular will discard the identity of all nested components within the <code>ngFor</code> and re-render the entire list. Even if the objects deeply equal, the change detection will still detect the change.</p><p>To help our loop caching components and instead changing their inputs, we can add a <code>trackBy</code> function to the <code>ngFor</code> directive.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-html data-lang=html><span style=display:flex><span>&lt;<span style=color:#f92672>div</span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>class</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;checkbox-row&#34;</span>
</span></span><span style=display:flex><span>  <span style=color:#960050;background-color:#1e0010>*</span><span style=color:#a6e22e>ngFor</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;let option of field.options; trackBy: fieldOptionTrackBy&#34;</span>
</span></span><span style=display:flex><span>&gt;&lt;/<span style=color:#f92672>div</span>&gt;
</span></span></code></pre></div><p>And in TypeScript, we add identity tracking function:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-typescript data-lang=typescript><span style=display:flex><span><span style=color:#a6e22e>fieldOptionTrackBy</span>(<span style=color:#a6e22e>index</span>: <span style=color:#66d9ef>number</span>, <span style=color:#a6e22e>option</span>: <span style=color:#66d9ef>AssistantStepOption</span>)<span style=color:#f92672>:</span> <span style=color:#66d9ef>string</span> {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>option</span>.<span style=color:#a6e22e>identifier</span>;
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><blockquote><p><em><strong>Background:</strong> Angular did reset my <code>mat-checkbox</code> within the <code>ngFor</code>. That lead to a discard of the freshly changed values.</em></p></blockquote></section><div class=post-tags><nav class="nav tags"><ul class=tags><li><a href=/tags/web>web</a></li></ul></nav></div></div></div></article></main><footer><div style=display:flex><a class=soc href=https://github.com/vknabel rel=me title=GitHub><svg class="feather"><use href="/svg/feather-sprite.51cf5647cb1987f769b616558f2620fd9423d72058490231b391bf6aa3744b55.svg#github"/></svg></a><a class=border></a><a class=soc href=https://mastodon.social/@vknabel/ rel=me title=Mastodon><svg class="feather"><use href="/svg/feather-sprite.51cf5647cb1987f769b616558f2620fd9423d72058490231b391bf6aa3744b55.svg#at-sign"/></svg></a><a class=border></a></div><div class=footer-info>2025 Â© Valentin Knabel | <a href=https://github.com/athul/archie>Archie Theme</a> | Built with <a href=https://gohugo.io>Hugo</a></div></footer></div></body></html>